# SSH-authorizer

Позволяет автоматизировать подключение к серверу через ssh, посредством автоматической генерации ssh-ключа, добавления его на сервер и сохранения данных о сервере в таблицу

# Пример работы
`alex@ubuntu~$ ssh-list`  
![Скриншот](https://raw.githubusercontent.com/gistrec/SSH-authorizer/master/screenshot.png)  
Подключаемся к серверу с id 1  
`alex@ubuntu~$ ssh-list -c 1`

# Запуск
Доступные флаги для запуска:

| Флаг   | Описание |
| ------ | -------- |
| Без флага | Показать список серверов
| -a `<user>` `<host>` | Добавить сервер |
| -с `<id>` | Подключение к серверу |
| -d `<id>` | Удалить сервер |
| -i | Установка - добавить скрипт в /usr/bin |
| -h | Показать справку |

# Принцип работы
При добавлении сервера проверяется ssh-доступ  

Создается открытый и закрытый ключ  
`ssh-keygen -t rsa -q -N '' -f ~/.ssh/<user>@<host>`  

Публичный ключ отправляется на сервер  
`scp ~/.ssh/<user>@<host>.pub $server:~`  

Открытый ключ добавляется в авторизованные ключи на сервере  
`remote$ [ -d ~/.ssh ] || (mkdir ~/.ssh; chmod 711 ~/.ssh)`  
`remote$ cat ~/<user>@<host>.pub >> ~/.ssh/authorized_keys`  
`remote$ chmod 600 ~/.ssh/authorized_keys`  
`remote$ rm ~/<user>@<host>.pub`  

Добавляются данные о сервере в файл `~/.ssh/ssh-list`,  из которого будет создаваться таблица доступных серверов
